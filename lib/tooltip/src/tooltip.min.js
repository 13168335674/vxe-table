"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _conf=_interopRequireDefault(require("../../conf")),_tools=require("../../tools");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default2={name:"VxeTooltip",props:{value:Boolean,theme:{type:String,default:function(){return _conf.default.tooltip.theme}},content:String,zIndex:{type:Number,default:function(){return _conf.default.tooltip.zIndex}},isArrow:{type:Boolean,default:!0}},data:function(){return{isUpdate:!1,visible:!1,tipStore:{style:null,placement:"",arrowStyle:null}}},watch:{value:function(t){this.isUpdate||this[t?"show":"close"](),this.isUpdate=!1}},mounted:function(){var o=this,i=this.$el,t=this.value,l=i.parentNode;Array.from(i.children).forEach(function(t,e){1<e&&(l.insertBefore(t,i),o.target=t)}),l.removeChild(i),t&&this.show()},beforeDestroy:function(){var t=this.$el,e=t.parentNode;e&&e.removeChild(t)},render:function(t){var e=this.theme,o=this.content,i=this.isArrow,l=this.visible,n=this.tipStore;return t("div",{class:["vxe-table--tooltip-wrapper","theme--".concat(e),"placement--".concat(n.placement),{"is--visible":l,"is--arrow":i}],style:n.style,ref:"tipWrapper"},[t("div",{class:["vxe-table--tooltip-content"]},o),t("div",{class:["vxe-table--tooltip-arrow"],style:n.arrowStyle})].concat(this.$slots.default))},methods:{show:function(){return this.toVisible(this.target)},close:function(){return Object.assign(this.tipStore,{style:null,placement:"",arrowStyle:null}),this.update(!1),this.$nextTick()},update:function(t){t!==this.visible&&(this.visible=t,this.isUpdate=!0,this.$emit("input",this.visible))},toVisible:function(i){var e=this;if(i){var l=this.$el,n=this.tipStore,o=this.zIndex,t=_tools.DomTools.getOffsetPos(i),s=t.top,r=t.left,a=_tools.DomTools.getDomNode(),c=a.scrollTop,f=a.scrollLeft,u=a.visibleWidth,h=l.parentNode,p=r;return n.placement="top",n.arrowStyle={left:"50%"},h||document.body.appendChild(l),this.update(!0),this.$nextTick().then(function(){var t=l;if(t)return p=r+Math.floor((i.offsetWidth-t.offsetWidth)/2),n.style={zIndex:o,width:"".concat(t.offsetWidth,"px"),top:"".concat(s-t.offsetHeight-6,"px"),left:"".concat(p,"px")},e.$nextTick()}).then(function(){var t=l;if(t){var e=t.offsetHeight,o=t.offsetWidth;s-e<c+6&&(n.placement="bottom",n.style.top="".concat(s+i.offsetHeight+6,"px")),p<f+6?(p=f+6,n.arrowStyle.left="".concat(p+16<r?r-p+16:16,"px"),n.style.left="".concat(p,"px")):f+u<r+o&&(p=f+u-o-6,n.arrowStyle.left="".concat(o-Math.max(Math.floor((p+o-r)/2),22),"px"),n.style.left="".concat(p,"px"))}})}return this.$nextTick()}}};exports.default=_default2;