"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,o){return l in e?Object.defineProperty(e,l,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[l]=o,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,l=this.$el,o=this.$refs,t=this.fixedType,r=e.elemStore,n="".concat(t||"main","-footer-");r["".concat(n,"wrapper")]=l,r["".concat(n,"table")]=o.table,r["".concat(n,"colgroup")]=o.colgroup,r["".concat(n,"list")]=o.tfoot,r["".concat(n,"x-space")]=o.xSpace},render:function(w){var e=this._e,T=this.$parent,I=this.fixedType,l=this.fixedColumn,o=this.tableColumn,C=this.footerData,S=T.$listeners,t=T.footerRowClassName,U=T.footerCellClassName,k=T.footerAlign,L=T.footerSpanMethod,E=T.align,r=T.scrollXLoad,P=T.columnKey,A=T.showOverflow,D=T.overflowX,F=T.getColumnIndex;return I&&A?o=l:r&&I&&(o=l),w("div",{class:["vxe-table--footer-wrapper",I?"fixed-".concat(I,"--wrapper"):"body--wrapper"],on:{scroll:this.scrollEvent}},[I?e():w("div",{class:"vxe-body--x-space",ref:"xSpace"}),w("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},ref:"table"},[w("colgroup",{ref:"colgroup"},o.map(function(e,l){return w("col",{attrs:{name:e.id},key:l})}).concat([w("col",{attrs:{name:"col_gutter"}})])),w("tfoot",{ref:"tfoot"},C.map(function(g,y){return w("tr",{class:["vxe-footer--row",t?_xeUtils.default.isFunction(t)?t({$table:T,$rowIndex:y,fixed:I}):t:""]},o.map(function(l,o){var e,t=l.showOverflow,r=l.footerAlign,n=l.align,i=l.children&&l.children.length,c=I?l.fixed!==I&&!i:l.fixed&&D,a=_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?A:t,s=r||n||k||E,d="title"===a,f=!0===a||"tooltip"===a,u=d||f||"ellipsis"===a,x={"data-colid":l.id},p={},m=F(l);if((d||f)&&(p.mouseover=function(e){d?_tools.DomTools.updateCellTitle(e):f&&T.triggerFooterTooltipEvent(e,{$table:T,$rowIndex:y,column:l,columnIndex:m,$columnIndex:o,fixed:I})}),f&&(p.mouseout=function(e){T.clostTooltip()}),S["header-cell-click"]&&(p.click=function(e){_tools.UtilTools.emitEvent(T,"header-cell-click",[{$table:T,$rowIndex:y,column:l,columnIndex:m,$columnIndex:o,fixed:I,cell:e.currentTarget},e])}),S["header-cell-dblclick"]&&(p.dblclick=function(e){_tools.UtilTools.emitEvent(T,"header-cell-dblclick",[{$table:T,$rowIndex:y,column:l,columnIndex:m,$columnIndex:o,fixed:I,cell:e.currentTarget},e])}),L){var v=L({$table:T,$rowIndex:y,column:l,columnIndex:m,$columnIndex:o,fixed:I,data:C})||{},b=v.rowspan,$=void 0===b?1:b,h=v.colspan,_=void 0===h?1:h;if(!$||!_)return null;x.rowspan=$,x.colspan=_}return w("td",{class:["vxe-footer--column",l.id,(e={},_defineProperty(e,"col--".concat(s),s),_defineProperty(e,"fixed--hidden",c),_defineProperty(e,"col--ellipsis",u),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),U?_xeUtils.default.isFunction(U)?U({$table:T,$rowIndex:y,column:l,columnIndex:m,$columnIndex:o,fixed:I}):U:""],attrs:x,on:p,key:P?l.id:m},[w("div",{class:"vxe-cell"},_tools.UtilTools.formatText(g[T.tableColumn.indexOf(l)],1))])}).concat([w("td",{class:"col--gutter"})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,o=this.fixedType,t=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=l.lastScrollLeft,c=t.tableHeader,a=c?c.$el:null,s=t.tableBody.$el,d=t.tableFooter.$el.scrollLeft,f=d!==i;l.lastScrollLeft=d,l.lastScrollTime=Date.now(),a&&(a.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:o,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:l},e])}}};exports.default=_default;