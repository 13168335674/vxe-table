"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,l,t){return l in e?Object.defineProperty(e,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[l]=t,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,l=this.$el,t=this.$refs,o=this.fixedType,r=e.elemStore,n="".concat(o||"main","-footer-");r["".concat(n,"wrapper")]=l,r["".concat(n,"table")]=t.table,r["".concat(n,"colgroup")]=t.colgroup,r["".concat(n,"list")]=t.tfoot,r["".concat(n,"x-space")]=t.xSpace},render:function(T){var e=this._e,C=this.$parent,U=this.fixedType,l=this.fixedColumn,S=this.tableColumn,k=this.footerData,L=C.$listeners,t=C.footerRowClassName,P=C.footerCellClassName,o=C.footerRowStyle,E=C.footerCellStyle,A=C.footerAlign,D=C.footerSpanMethod,F=C.align,r=C.scrollXLoad,O=C.columnKey,X=C.showOverflow,q=C.overflowX,N=C.getColumnIndex;return U&&X?S=l:r&&U&&(S=l),T("div",{class:["vxe-table--footer-wrapper",U?"fixed-".concat(U,"--wrapper"):"body--wrapper"],on:{scroll:this.scrollEvent}},[U?e():T("div",{class:"vxe-body--x-space",ref:"xSpace"}),T("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},ref:"table"},[T("colgroup",{ref:"colgroup"},S.map(function(e,l){return T("col",{attrs:{name:e.id},key:l})}).concat([T("col",{attrs:{name:"col_gutter"}})])),T("tfoot",{ref:"tfoot"},k.map(function(w,I){return T("tr",{class:["vxe-footer--row",t?_xeUtils.default.isFunction(t)?t({$table:C,$rowIndex:I,fixed:U}):t:""],style:o?_xeUtils.default.isFunction(o)?o({$table:C,$rowIndex:I,fixed:U}):o:null},S.map(function(l,t){var e,o=l.showOverflow,r=l.footerAlign,n=l.align,i=l.footerClassName,a=l.children&&l.children.length,c=U?l.fixed!==U&&!a:l.fixed&&q,s=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?X:o,d=r||n||A||F,f="title"===s,u=!0===s||"tooltip"===s,x=f||u||"ellipsis"===s,p={"data-colid":l.id},m={},v=N(l),b={$table:C,$rowIndex:I,column:l,columnIndex:v,$columnIndex:t,fixed:U};if((f||u)&&(m.mouseenter=function(e){f?_tools.DomTools.updateCellTitle(e):u&&C.triggerFooterTooltipEvent(e,{$table:C,$rowIndex:I,column:l,columnIndex:v,$columnIndex:t,fixed:U})}),u&&(m.mouseleave=function(e){u&&C.handleTargetLeaveEvent(e)}),L["header-cell-click"]&&(m.click=function(e){_tools.UtilTools.emitEvent(C,"header-cell-click",[{$table:C,$rowIndex:I,column:l,columnIndex:v,$columnIndex:t,fixed:U,cell:e.currentTarget},e])}),L["header-cell-dblclick"]&&(m.dblclick=function(e){_tools.UtilTools.emitEvent(C,"header-cell-dblclick",[{$table:C,$rowIndex:I,column:l,columnIndex:v,$columnIndex:t,fixed:U,cell:e.currentTarget},e])}),D){var $=D({$table:C,$rowIndex:I,column:l,columnIndex:v,$columnIndex:t,fixed:U,data:k})||{},_=$.rowspan,y=void 0===_?1:_,h=$.colspan,g=void 0===h?1:h;if(!y||!g)return null;p.rowspan=y,p.colspan=g}return T("td",{class:["vxe-footer--column",l.id,(_defineProperty(e={},"col--".concat(d),d),_defineProperty(e,"col--".concat(l.type),l.type),_defineProperty(e,"col--last",t===S.length-1),_defineProperty(e,"fixed--hidden",c),_defineProperty(e,"col--ellipsis",x),_defineProperty(e,"filter--active",l.filters.some(function(e){return e.checked})),e),_tools.UtilTools.getClass(i,b),_tools.UtilTools.getClass(P,b)],attrs:p,style:E?_xeUtils.default.isFunction(E)?E({$table:C,$rowIndex:I,column:l,columnIndex:v,$columnIndex:t,fixed:U}):E:null,on:m,key:O?l.id:v},[T("div",{class:"vxe-cell"},_tools.UtilTools.formatText(w[C.tableColumn.indexOf(l)],1))])}).concat([T("td",{class:"col--gutter"})]))}))])])},methods:{scrollEvent:function(e){var l=this.$parent,t=this.fixedType,o=l.$refs,r=l.scrollXLoad,n=l.triggerScrollXEvent,i=l.lastScrollLeft,a=o.tableHeader,c=a?a.$el:null,s=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft,f=d!==i;l.lastScrollLeft=d,l.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(l,"scroll",[{type:"footer",fixed:t,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:l},e])}}};exports.default=_default;