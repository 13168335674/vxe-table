"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,t=this.$el,l=this.$refs,o=this.fixedType,r=e.elemStore,n="".concat(o||"main","-footer-");r["".concat(n,"wrapper")]=t,r["".concat(n,"table")]=l.table,r["".concat(n,"colgroup")]=l.colgroup,r["".concat(n,"list")]=l.tfoot,r["".concat(n,"x-space")]=l.xSpace},render:function(x){var e=this._e,p=this.$parent,m=this.fixedType,t=this.fixedColumn,l=this.tableColumn,o=this.footerData,v=p.$listeners,r=p.footerRowClassName,b=p.footerCellClassName,n=p.scrollXLoad,h=p.columnKey,_=p.showOverflow,$=p.overflowX,y=p.getColumnIndex;return m&&_?l=t:n&&m&&(l=t),x("div",{class:["vxe-table--footer-wrapper",m?"fixed-".concat(m,"--wrapper"):"body--wrapper"],on:{scroll:this.scrollEvent}},[m?e():x("div",{class:"vxe-body--x-space",ref:"xSpace"}),x("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},ref:"table"},[x("colgroup",{ref:"colgroup"},l.map(function(e,t){return x("col",{attrs:{name:e.id},key:t})}).concat([x("col",{name:"col--gutter"})])),x("tfoot",{ref:"tfoot"},o.map(function(f,u){return x("tr",{class:["vxe-footer--row",r?_xeUtils.default.isFunction(r)?r({$rowIndex:u,fixed:m}):r:""]},l.map(function(t,l){var e,o=t.showOverflow,r=t.children&&t.children.length,n=m?t.fixed!==m&&!r:t.fixed&&$,i=_xeUtils.default.isUndefined(o)||_xeUtils.default.isNull(o)?_:o,c=!0===i||"tooltip"===i,a="title"===i||c||"ellipsis"===i,s={},d=y(t);return c&&(s.mouseover=function(e){p.triggerFooterTooltipEvent(e,{$table:p,$rowIndex:u,column:t,columnIndex:d,$columnIndex:l,fixed:m})},s.mouseout=function(e){p.clostTooltip()}),v["header-cell-click"]&&(s.click=function(e){_tools.UtilTools.emitEvent(p,"header-cell-click",[{$table:p,$rowIndex:u,column:t,columnIndex:d,$columnIndex:l,fixed:m,cell:e.currentTarget},e])}),v["header-cell-dblclick"]&&(s.dblclick=function(e){_tools.UtilTools.emitEvent(p,"header-cell-dblclick",[{$table:p,$rowIndex:u,column:t,columnIndex:d,$columnIndex:l,fixed:m,cell:e.currentTarget},e])}),x("td",{class:["vxe-footer--column",t.id,(e={},_defineProperty(e,"col--".concat(t.headerAlign),t.headerAlign),_defineProperty(e,"fixed--hidden",n),_defineProperty(e,"col--ellipsis",a),_defineProperty(e,"filter--active",t.filters.some(function(e){return e.checked})),e),b?_xeUtils.default.isFunction(b)?b({$rowIndex:u,column:t,columnIndex:d,$columnIndex:l,fixed:m}):b:""],attrs:{"data-colid":t.id},on:s,key:h?t.id:d},[x("div",{class:"vxe-cell"},_tools.UtilTools.formatText(f[p.tableColumn.indexOf(t)],1))])}).concat([x("td",{class:"col--gutter"})]))}))])])},methods:{scrollEvent:function(e){var t=this.$parent,l=this.fixedType,o=t.$refs,r=t.scrollXLoad,n=t.triggerScrollXEvent,i=t.lastScrollLeft,c=o.tableHeader,a=c?c.$el:null,s=o.tableBody.$el,d=o.tableFooter.$el.scrollLeft,f=d!==i;t.lastScrollLeft=d,t.lastScrollTime=Date.now(),a&&(a.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(t,"scroll",[{type:"footer",fixed:l,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:t},e])}}};exports.default=_default;