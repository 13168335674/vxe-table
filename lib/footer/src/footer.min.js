"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,o,l){return o in e?Object.defineProperty(e,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[o]=l,e}var _default={name:"VxeTableFooter",props:{footerData:Array,tableColumn:Array,visibleColumn:Array,fixedColumn:Array,size:String,fixedType:String},mounted:function(){var e=this.$parent,o=this.$el,l=this.$refs,t=this.fixedType,r=e.elemStore,n="".concat(t||"main","-footer-");r["".concat(n,"wrapper")]=o,r["".concat(n,"table")]=l.table,r["".concat(n,"colgroup")]=l.colgroup,r["".concat(n,"list")]=l.tfoot,r["".concat(n,"x-space")]=l.xSpace},render:function(I){var e=this._e,C=this.$parent,U=this.fixedType,o=this.fixedColumn,l=this.tableColumn,S=this.footerData,k=C.$listeners,t=C.footerRowClassName,L=C.footerCellClassName,E=C.footerAlign,P=C.footerSpanMethod,A=C.align,r=C.scrollXLoad,D=C.columnKey,O=C.showOverflow,X=C.overflowX,q=C.getColumnIndex;return U&&O?l=o:r&&U&&(l=o),I("div",{class:["vxe-table--footer-wrapper",U?"fixed-".concat(U,"--wrapper"):"body--wrapper"],on:{scroll:this.scrollEvent}},[U?e():I("div",{class:"vxe-body--x-space",ref:"xSpace"}),I("table",{class:"vxe-table--footer",attrs:{cellspacing:0,cellpadding:0,border:0},ref:"table"},[I("colgroup",{ref:"colgroup"},l.map(function(e,o){return I("col",{attrs:{name:e.id},key:o})}).concat([I("col",{attrs:{name:"col_gutter"}})])),I("tfoot",{ref:"tfoot"},S.map(function(w,T){return I("tr",{class:["vxe-footer--row",t?_xeUtils.default.isFunction(t)?t({$table:C,$rowIndex:T,fixed:U}):t:""]},l.map(function(o,l){var e,t=o.showOverflow,r=o.footerAlign,n=o.align,i=o.footerClassName,a=o.children&&o.children.length,c=U?o.fixed!==U&&!a:o.fixed&&X,s=_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?O:t,d=r||n||E||A,f="title"===s,u=!0===s||"tooltip"===s,p=f||u||"ellipsis"===s,x={"data-colid":o.id},m={},v=q(o),b={$table:C,$rowIndex:T,column:o,columnIndex:v,$columnIndex:l,fixed:U};if((f||u)&&(m.mouseover=function(e){f?_tools.DomTools.updateCellTitle(e):u&&C.triggerFooterTooltipEvent(e,{$table:C,$rowIndex:T,column:o,columnIndex:v,$columnIndex:l,fixed:U})}),u&&(m.mouseout=function(e){C.clostTooltip()}),k["header-cell-click"]&&(m.click=function(e){_tools.UtilTools.emitEvent(C,"header-cell-click",[{$table:C,$rowIndex:T,column:o,columnIndex:v,$columnIndex:l,fixed:U,cell:e.currentTarget},e])}),k["header-cell-dblclick"]&&(m.dblclick=function(e){_tools.UtilTools.emitEvent(C,"header-cell-dblclick",[{$table:C,$rowIndex:T,column:o,columnIndex:v,$columnIndex:l,fixed:U,cell:e.currentTarget},e])}),P){var $=P({$table:C,$rowIndex:T,column:o,columnIndex:v,$columnIndex:l,fixed:U,data:S})||{},h=$.rowspan,_=void 0===h?1:h,g=$.colspan,y=void 0===g?1:g;if(!_||!y)return null;x.rowspan=_,x.colspan=y}return I("td",{class:["vxe-footer--column",o.id,(e={},_defineProperty(e,"col--".concat(d),d),_defineProperty(e,"fixed--hidden",c),_defineProperty(e,"col--ellipsis",p),_defineProperty(e,"filter--active",o.filters.some(function(e){return e.checked})),e),_tools.UtilTools.getClass(i,b),_tools.UtilTools.getClass(L,b)],attrs:x,on:m,key:D?o.id:v},[I("div",{class:"vxe-cell"},_tools.UtilTools.formatText(w[C.tableColumn.indexOf(o)],1))])}).concat([I("td",{class:"col--gutter"})]))}))])])},methods:{scrollEvent:function(e){var o=this.$parent,l=this.fixedType,t=o.$refs,r=o.scrollXLoad,n=o.triggerScrollXEvent,i=o.lastScrollLeft,a=t.tableHeader,c=a?a.$el:null,s=t.tableBody.$el,d=t.tableFooter.$el.scrollLeft,f=d!==i;o.lastScrollLeft=d,o.lastScrollTime=Date.now(),c&&(c.scrollLeft=d),s&&(s.scrollLeft=d),r&&f&&n(e),_tools.UtilTools.emitEvent(o,"scroll",[{type:"footer",fixed:l,scrollTop:s.scrollTop,scrollLeft:d,isX:f,isY:!1,$table:o},e])}}};exports.default=_default;