"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_tools=require("../../tools");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _default={methods:{filter:function(t,e){var l=this.getColumnByField(t),i=l.filters;if(e){var o=e(i);_xeUtils.default.isArray(o)&&(l.filters=_tools.UtilTools.getFilters(o))}return this.$nextTick().then(function(){return i})},triggerFilterEvent:function(t,e,l){var i=this.$refs,o=this.filterStore;if(o.column===e&&o.visible)o.visible=!1;else{var s=i.filterWrapper,r=t.target,n=t.pageX,a=_tools.DomTools.getDomNode().visibleWidth,c=_tools.DomTools.getAbsolutePos(r),u=c.top,f=c.left;(!o.zIndex||o.zIndex<_tools.UtilTools.getLastZIndex())&&(o.zIndex=_tools.UtilTools.getZIndex()),Object.assign(o,{args:l,multiple:e.filterMultiple,options:e.filters,column:e,style:{zIndex:o.zIndex,top:"".concat(u+r.clientHeight+6,"px"),left:"".concat(f,"px")},visible:!0}),o.isAllSelected=o.options.every(function(t){return t.checked}),o.isIndeterminate=!o.isAllSelected&&o.options.some(function(t){return t.checked}),this.$nextTick(function(){var t=s.$el.clientWidth,e=f-t/2+10;a<n+t&&(e=f-t),o.style.left="".concat(Math.max(20,e+20),"px"),o.style.top="".concat(u+r.clientHeight+6,"px")})}},confirmFilterEvent:function(t){var e=this.visibleColumn,l=this.filterStore,i=this.remoteFilter,o=this.scrollXLoad,s=this.scrollYLoad,r=l.column,n=r.property,a=[],c=[];r.filters.forEach(function(t){t.checked&&(a.push(t.value),c.push(t.data))}),l.visible=!1,i||this.handleTableData(!0);var u=[];e.filter(function(t){var e=t.property,l=t.filters,i=[],o=[];l&&l.length&&(l.forEach(function(t){t.checked&&(i.push(t.value),o.push(t.data))}),u.push({column:t,property:e,field:e,prop:e,values:i,datas:o}))}),_tools.UtilTools.emitEvent(this,"filter-change",[{column:r,property:n,field:n,prop:n,values:a,datas:c,filters:u,$table:this}]),this.updateFooter(),(o||s)&&(this.clearScroll(),s&&this.updateScrollYSpace()),this.closeFilter(),this.$nextTick(this.recalculate)},resetFilterEvent:function(t){this.filterStore.options.forEach(function(t){t.checked=!1,t.data=t._data}),this.confirmFilterEvent(t)},clearFilter:function(t){var e=arguments.length?this.getColumnByField(t):null,l=this.filterStore,i=function(t){var e=t.filters;e&&e.length&&e.forEach(function(t){t.checked=!1,t.data=t._data})};return e?i(e):this.visibleColumn.forEach(i),e&&e===l.column||Object.assign(l,{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1}),this.updateData()}}};exports.default=_default;